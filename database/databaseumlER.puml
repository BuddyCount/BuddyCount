@startuml databaseumlER

enum Currency {
  USD
  EUR
  CHF
  ...
}

enum ExpenseCategory {
  FOOD
  TRANSPORT
  HOUSING
  UTILITIES
  OTHER
}

class "Group" {
  {static} id: string/uuid
  linkToken: string/uuid
  name: string
  description: string
  currency: Currency
  users: UserIndex
  
  createdAt: date
  updatedAt: date
  version: int
}

class "Expense" {
  {static} id: string/uuid
  name: string
  category: ExpenseCategory
  currency: Currency
  exchange_rate: float
  date: date
  amount: float
  
  createdAt: date
  updatedAt: date
  version: int

  paidBy: PaidDetails
  paidFor: PaidDetails
  images: string[]
}

Group "1" -- "*" Expense

/'Comment all below if your visualiser doesn't support json'/

json "PaidDetails" {
  "repartitionType": "\"portions\" | \"amount\"",
  "repartition": "['userId': int; 'values': { 'amount?':float, 'share?':float }, ...]"
}

"PaidDetails" -l[hidden]- Expense

json "UserIndex" {
    "id":"int",
    "name":"str"
    /'"indexes" : "[{'id':int; 'name':str}, ...]",'/
    /'"maybeExpenses?":"",'/
    /'"maybeBalances?":""'/
}

UserIndex -l[hidden]- Group

@enduml